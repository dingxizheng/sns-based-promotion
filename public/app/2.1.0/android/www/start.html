<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">
    <title></title>
  
    <!-- style sheet -->
    <link href="css/pure/buttons-min.css" rel="stylesheet">

    <!-- embeded styles -->
    <style type="text/css">
      .message-box {
        margin: 15vw;
        margin-top: 40vh;
        font-family: Arial, 'Helvetica Neue', Helvetica, sans-serif !important;
      }

      .message {
        color: #555;
        font-size: 30px;
      }

    </style>

    <!-- cordova.js -->
    <script src="cordova.js"></script>

  </head>
  <body>
  
    <div class="message-box">
      <p class="message" id="disconnected-message">
        The internet is disconnected on your device.
      </p>
      <a class="pure-button" id="check-btn" onclick="checkInternet(); false;">Try Again</a>
    </div>

  </body>
  <script type="text/javascript">

    document.getElementById('disconnected-message').style.display = 'none';
    document.getElementById('check-btn').style.display = 'none';

    function checkInternet() {

      document.getElementById('disconnected-message').style.display = 'none';
      document.getElementById('check-btn').style.display = 'none';

      setTimeout(function() {
          document.getElementById('disconnected-message').style.display = 'block';
          document.getElementById('check-btn').style.display = 'block';
      }, 1000);

      var type = navigator.connection.type;
      if (type === Connection.NONE) {
        navigator.splashscreen.hide();
      } else {
        navigator.splashscreen.show();
        var version = localStorage.getItem("app_version");
        // alert(version);
        // window.location.href = "index.html";
        window.location = "http://rails-api-env-b4cm2bfxbr.elasticbeanstalk.com/app?app_version=" + (version || '2.0.0');
      }
    };

    document.addEventListener('deviceready', function() {
      checkInternet();
    });

  </script>
</html>
